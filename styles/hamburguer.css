/* ==================== SUBMENU COMO ACORDEÃO (MOBILE) ==================== */
@media (max-width: 900px) {
  .dropdown,
  .mega-menu {
    /* Reset completo para comportamento de acordeão */
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    background: transparent;
    border-left: none;
    margin: 0 !important;
    padding: 0 !important;
    /* Controle de altura para animação */
    max-height: 0;
    overflow: hidden;
    opacity: 1; /* Mantemos opacidade 1 para evitar flicker */
    visibility: visible; /* Sempre visível para o leitor de tela */
    display: block !important;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Estado ABERTO do acordeão */
  .nav__item.open > .dropdown,
  .nav__item.open > .mega-menu,
  .dropdown[aria-hidden="false"],
  .mega-menu[aria-hidden="false"] {
    max-height: 1500px; /* Valor alto suficiente para conter o conteúdo */
    border-bottom: 1px solid var(--gray-200);
    margin-top: 0;
  }

  /* Estilização dos links dentro do acordeão */
  .dropdown__list {
    list-style: none;
    padding: 8px 0 8px 16px !important; /* Recuo visual para hierarquia */
    margin: 0 !important;
    background: var(--gray-50);
    border-left: 3px solid var(--accent);
  }

  .dropdown__link,
  .mega-menu__link {
    display: block;
    padding: 14px 24px !important;
    font-size: 15px;
    color: var(--gray-800);
    text-decoration: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.03);
    transition: all 0.2s ease;
  }

  .dropdown__link:last-child,
  .mega-menu__link:last-child {
    border-bottom: none;
  }

  .dropdown__link:active,
  .mega-menu__link:active {
    background: rgba(7, 10, 63, 0.08);
    color: var(--accent);
  }

  /* Ajuste para títulos dentro de mega-menus no mobile */
  .mega-menu__section-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--accent);
    padding: 18px 24px;
    margin: 0;
    border-bottom: 1px solid var(--gray-200);
    background: var(--white);
  }

  /* Remove a animação de entrada dos itens do menu principal se interferir */
  .nav__list--open .nav__item {
    animation: none;
  }
}
